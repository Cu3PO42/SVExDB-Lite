{"version":3,"sources":["webpack:///route-home.chunk.d5a05.js","webpack:///./routes/home/index.js","webpack:///./routes/home/style.scss?5ac2"],"names":["webpackJsonp","FvLE","module","__webpack_exports__","__webpack_require__","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","TypeError","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","d","Home","__WEBPACK_IMPORTED_MODULE_0_preact__","__WEBPACK_IMPORTED_MODULE_1__style__","n","__WEBPACK_IMPORTED_MODULE_1__style___default","tsvUrl","_ref","_ref2","_ref3","_ref4","_ref5","_ref6","_Component","_temp","_this","_ret","_len","arguments","length","args","Array","_key","this","apply","concat","state","tsvs","undefined","pkm","filteredPkm","showWoMatch","gen7","filterUser","handleTextChanged","e","updatePkm","target","handleShowChange","setState","checked","handleGen6Change","calculateFilteredPkm","handleGen7Change","handleUsernameChange","name","match","filteredUser","handleDrop","stopPropagation","preventDefault","console","log","dataTransfer","files","file","fileReader","FileReader","onload","ev","text","result","readAsText","componentDidMount","_this2","window","localStorage","data","getItem","JSON","parse","last_updated_at","Date","getTime","fetch","then","res","json","setItem","stringify","catch","lines","split","filter","test","map","_this3","matches","getMatchesForPkm","user","tsvs7","tsvs6","getPkm","render","_this4","tsv6Count","some","f","archived","tsv7Count","class","a","home","topWrapper","settings","type","onChange","defaultChecked","placeholder","onInput","statistics","invisible","slice","inputContainer","wrap","onDrop","results","hidden","tsv","href","link","Lglr","exports"],"mappings":"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","file":"route-home.chunk.d5a05.js","sourcesContent":["webpackJsonp([0],{\n\n/***/ \"FvLE\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Home; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_preact__ = __webpack_require__(\"KM04\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_preact___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_preact__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__style__ = __webpack_require__(\"Lglr\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__style__);\n\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\nvar tsvUrl = 'https://raw.githubusercontent.com/Cu3PO42/SVEx-Crawler/gh-pages/tsvs.json';\n\nvar _ref = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t'h3',\n\tnull,\n\t'Settings'\n);\n\nvar _ref2 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('br', null);\n\nvar _ref3 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('br', null);\n\nvar _ref4 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t'h3',\n\tnull,\n\t'Statistics'\n);\n\nvar _ref5 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('br', null);\n\nvar _ref6 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t'tr',\n\tnull,\n\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t'th',\n\t\tnull,\n\t\t'Pok\\xE9mon'\n\t),\n\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t'th',\n\t\tnull,\n\t\t'Matches'\n\t)\n);\n\nvar Home = function (_Component) {\n\t_inherits(Home, _Component);\n\n\tfunction Home() {\n\t\tvar _temp, _this, _ret;\n\n\t\t_classCallCheck(this, Home);\n\n\t\tfor (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t\t\targs[_key] = arguments[_key];\n\t\t}\n\n\t\treturn _ret = (_temp = (_this = _possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.state = {\n\t\t\ttsvs: undefined,\n\t\t\tpkm: [],\n\t\t\tfilteredPkm: [],\n\t\t\tshowWoMatch: false,\n\t\t\tgen7: true,\n\t\t\tfilterUser: \"\"\n\t\t}, _this.handleTextChanged = function (e) {\n\t\t\t_this.updatePkm(e.target.value);\n\t\t}, _this.handleShowChange = function (e) {\n\t\t\t_this.setState({ showWoMatch: e.target.checked });\n\t\t}, _this.handleGen6Change = function (e) {\n\t\t\t_this.setState({ gen7: false });\n\t\t\t_this.setState({ filteredPkm: _this.calculateFilteredPkm(_this.state.pkm, false, _this.state.filterUser) });\n\t\t}, _this.handleGen7Change = function (e) {\n\t\t\t_this.setState({ gen7: true });\n\t\t\t_this.setState({ filteredPkm: _this.calculateFilteredPkm(_this.state.pkm, true, _this.state.filterUser) });\n\t\t}, _this.handleUsernameChange = function (e) {\n\t\t\tvar name = e.target.value.match(/^(?:\\/?u\\/)?(.*)$/)[1];\n\t\t\tif (name === '' && e.target.value.match(/^\\/?u\\/$/)) {\n\t\t\t\t_this.setState({\n\t\t\t\t\tfilteredUser: '',\n\t\t\t\t\tfilteredPkm: []\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t_this.setState({\n\t\t\t\t\tfilterUser: name,\n\t\t\t\t\tfilteredPkm: _this.calculateFilteredPkm(_this.state.pkm, _this.state.gen7, name)\n\t\t\t\t});\n\t\t\t}\n\t\t}, _this.handleDrop = function (e) {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\tconsole.log(e);\n\t\t\tif (e.dataTransfer.files[0]) {\n\t\t\t\tvar file = e.dataTransfer.files[0];\n\t\t\t\tvar fileReader = new FileReader();\n\t\t\t\tfileReader.onload = function (ev) {\n\t\t\t\t\tvar text = ev.target.result;\n\t\t\t\t\te.target.value = text;\n\t\t\t\t\t_this.updatePkm(text);\n\t\t\t\t};\n\t\t\t\tfileReader.readAsText(file);\n\t\t\t}\n\t\t\tconsole.log(e);\n\t\t}, _temp), _possibleConstructorReturn(_this, _ret);\n\t}\n\n\tHome.prototype.componentDidMount = function componentDidMount() {\n\t\tvar _this2 = this;\n\n\t\tif (typeof window !== 'undefined' && window.localStorage) {\n\t\t\tvar data = localStorage.getItem('tsvdata');\n\t\t\tif (data) {\n\t\t\t\tvar tsvs = JSON.parse(data);\n\t\t\t\tthis.setState({ tsvs: tsvs });\n\t\t\t\tif (tsvs && tsvs.last_updated_at && new Date().getTime() / 1000 - tsvs.last_updated_at < 60 * 60 * 3) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfetch(tsvUrl).then(function (res) {\n\t\t\t\treturn res.json();\n\t\t\t}).then(function (tsvs) {\n\t\t\t\t_this2.setState({ tsvs: tsvs });\n\t\t\t\tlocalStorage.setItem('tsvdata', JSON.stringify(tsvs));\n\t\t\t}).catch(function () {\n\t\t\t\treturn null;\n\t\t\t});\n\t\t} else {\n\t\t\tfetch(tsvUrl).then(function (res) {\n\t\t\t\treturn res.json();\n\t\t\t}).then(function (tsvs) {\n\t\t\t\t_this2.setState({ tsvs: tsvs });\n\t\t\t});\n\t\t}\n\t};\n\n\tHome.prototype.updatePkm = function updatePkm(text) {\n\t\tvar lines = text.split(/\\r?\\n/).filter(function (e) {\n\t\t\treturn (/\\b\\d{4}\\b/.test(e)\n\t\t\t);\n\t\t}).map(function (e) {\n\t\t\treturn e.split(/(\\b\\d{4}\\b)/);\n\t\t});\n\t\tthis.setState({\n\t\t\tpkm: lines,\n\t\t\tfilteredPkm: this.calculateFilteredPkm(lines, this.state.gen7, this.state.filterUser)\n\t\t});\n\t};\n\n\tHome.prototype.calculateFilteredPkm = function calculateFilteredPkm(pkm, gen7, filterUser) {\n\t\tvar _this3 = this;\n\n\t\treturn pkm.filter(function (e) {\n\t\t\tvar matches = _this3.getMatchesForPkm(e, gen7);\n\t\t\treturn (filterUser ? matches.filter(function (e) {\n\t\t\t\treturn e.user === filterUser;\n\t\t\t}) : matches).length;\n\t\t});\n\t};\n\n\tHome.prototype.getMatchesForPkm = function getMatchesForPkm(pkm, gen7) {\n\t\tif (!this.state.tsvs) return [];\n\t\treturn (gen7 ? this.state.tsvs.tsvs7 : this.state.tsvs.tsvs6)[+pkm[1]];\n\t};\n\n\tHome.prototype.getPkm = function getPkm() {\n\t\treturn this.state.showWoMatch ? this.state.pkm : this.state.filteredPkm;\n\t};\n\n\tHome.prototype.render = function render() {\n\t\tvar _this4 = this;\n\n\t\tvar tsv6Count = this.state.tsvs ? this.state.tsvs.tsvs6.filter(function (e) {\n\t\t\treturn e.length && e.some(function (f) {\n\t\t\t\treturn !f.archived;\n\t\t\t});\n\t\t}).length : 0;\n\t\tvar tsv7Count = this.state.tsvs ? this.state.tsvs.tsvs7.filter(function (e) {\n\t\t\treturn e.length && e.some(function (f) {\n\t\t\t\treturn !f.archived;\n\t\t\t});\n\t\t}).length : 0;\n\t\treturn Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t'div',\n\t\t\t{ 'class': __WEBPACK_IMPORTED_MODULE_1__style___default.a.home },\n\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t'div',\n\t\t\t\t{ 'class': __WEBPACK_IMPORTED_MODULE_1__style___default.a.topWrapper },\n\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t'div',\n\t\t\t\t\t{ 'class': __WEBPACK_IMPORTED_MODULE_1__style___default.a.settings },\n\t\t\t\t\t_ref,\n\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t\t'label',\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('input', { type: 'checkbox', onChange: this.handleShowChange }),\n\t\t\t\t\t\t'Show Pok\\xE9mon without matches'\n\t\t\t\t\t),\n\t\t\t\t\t_ref2,\n\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t\t'label',\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('input', { type: 'radio', name: 'gen', onChange: this.handleGen6Change }),\n\t\t\t\t\t\t'Generation 6'\n\t\t\t\t\t),\n\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t\t'label',\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('input', { type: 'radio', name: 'gen', defaultChecked: true, onChange: this.handleGen7Change }),\n\t\t\t\t\t\t'Generation 7'\n\t\t\t\t\t),\n\t\t\t\t\t_ref3,\n\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('input', { type: 'text', name: 'username', placeholder: 'Limit results to this username', onInput: this.handleUsernameChange })\n\t\t\t\t),\n\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t'div',\n\t\t\t\t\t{ 'class': __WEBPACK_IMPORTED_MODULE_1__style___default.a.statistics },\n\t\t\t\t\t_ref4,\n\t\t\t\t\t'TSV6: ',\n\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t\t'span',\n\t\t\t\t\t\t{ 'class': __WEBPACK_IMPORTED_MODULE_1__style___default.a.invisible },\n\t\t\t\t\t\t'0000'.slice((\"\" + tsv6Count).length)\n\t\t\t\t\t),\n\t\t\t\t\ttsv6Count,\n\t\t\t\t\t' / 4096',\n\t\t\t\t\t_ref5,\n\t\t\t\t\t'TSV7: ',\n\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t\t'span',\n\t\t\t\t\t\t{ 'class': __WEBPACK_IMPORTED_MODULE_1__style___default.a.invisible },\n\t\t\t\t\t\t'0000'.slice((\"\" + tsv7Count).length)\n\t\t\t\t\t),\n\t\t\t\t\ttsv7Count,\n\t\t\t\t\t' / 4096'\n\t\t\t\t)\n\t\t\t),\n\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t'div',\n\t\t\t\t{ 'class': __WEBPACK_IMPORTED_MODULE_1__style___default.a.inputContainer },\n\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('textarea', { wrap: 'soft', placeholder: 'Paste some Pok\\xE9mon data here or drag & drop a dump...', onInput: this.handleTextChanged, onDrop: this.handleDrop })\n\t\t\t),\n\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t'table',\n\t\t\t\t{ 'class': __WEBPACK_IMPORTED_MODULE_1__style___default.a.results + ' ' + (this.state.pkm.length ? '' : __WEBPACK_IMPORTED_MODULE_1__style___default.a.hidden) },\n\t\t\t\t_ref6,\n\t\t\t\tthis.getPkm().map(function (pkm) {\n\t\t\t\t\treturn Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t\t'tr',\n\t\t\t\t\t\t{ 'class': true },\n\t\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t\t\t'td',\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tpkm[0],\n\t\t\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t\t\t\t'span',\n\t\t\t\t\t\t\t\t{ 'class': __WEBPACK_IMPORTED_MODULE_1__style___default.a.tsv },\n\t\t\t\t\t\t\t\tpkm[1]\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tpkm[2]\n\t\t\t\t\t\t),\n\t\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t\t\t'td',\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t_this4.getMatchesForPkm(pkm, _this4.state.gen7).map(function (e) {\n\t\t\t\t\t\t\t\treturn Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t\t\t\t\t'div',\n\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t\t\t\t\t\t'a',\n\t\t\t\t\t\t\t\t\t\t{ href: 'https://www.reddit.com/r/SVExchange/comments/' + e.link + '/' + pkm[1] + '/', target: '_blank' },\n\t\t\t\t\t\t\t\t\t\t'/u/',\n\t\t\t\t\t\t\t\t\t\te.user\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\te.archived ? ' (recently archived)' : null\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t})\n\t\t\t)\n\t\t);\n\t};\n\n\treturn Home;\n}(__WEBPACK_IMPORTED_MODULE_0_preact__[\"Component\"]);\n\n\n\n/***/ }),\n\n/***/ \"Lglr\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\nmodule.exports = {\"inputContainer\":\"inputContainer__26ab2\",\"results\":\"results__1fpcf\",\"hidden\":\"hidden__1IFvQ\",\"tsv\":\"tsv__3FGFu\",\"topWrapper\":\"topWrapper__3C23j\",\"settings\":\"settings__2-d0H\",\"statistics\":\"statistics__3IleG\",\"invisible\":\"invisible__2NF4r\"};\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// route-home.chunk.d5a05.js","import { h, Component } from 'preact';\nimport style from './style';\n\nconst tsvUrl = 'https://raw.githubusercontent.com/Cu3PO42/SVEx-Crawler/gh-pages/tsvs.json';\n\nexport default class Home extends Component {\n\tstate = {\n\t\ttsvs: undefined,\n\t\tpkm: [],\n\t\tfilteredPkm: [],\n\t\tshowWoMatch: false,\n\t\tgen7: true,\n\t\tfilterUser: \"\"\n\t};\n\n\tcomponentDidMount() {\n\t\tif (typeof window !== 'undefined' && window.localStorage) {\n\t\t\tconst data = localStorage.getItem('tsvdata');\n\t\t\tif (data) {\n\t\t\t\tconst tsvs = JSON.parse(data);\n\t\t\t\tthis.setState({ tsvs });\n\t\t\t\tif (tsvs && tsvs.last_updated_at && new Date().getTime() / 1000 - tsvs.last_updated_at < 60 * 60 * 3) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfetch(tsvUrl).then(res => res.json()).then((tsvs) => {\n\t\t\t\tthis.setState({ tsvs });\n\t\t\t\tlocalStorage.setItem('tsvdata', JSON.stringify(tsvs));\n\t\t\t}).catch(() => null);\n\t\t} else {\n\t\t\tfetch(tsvUrl).then(res => res.json()).then((tsvs) => {\n\t\t\t\tthis.setState({ tsvs });\n\t\t\t});\n\t\t}\n\t}\n\n\tupdatePkm(text) {\n\t\tconst lines = text\n\t\t\t.split(/\\r?\\n/)\n\t\t\t.filter(e => /\\b\\d{4}\\b/.test(e))\n\t\t\t.map(e => e.split(/(\\b\\d{4}\\b)/));\n\t\tthis.setState({\n\t\t\tpkm: lines,\n\t\t\tfilteredPkm: this.calculateFilteredPkm(lines, this.state.gen7, this.state.filterUser)\n\t\t });\n\t}\n\n\tcalculateFilteredPkm(pkm, gen7, filterUser) {\n\t\treturn pkm.filter(e => {\n\t\t\tconst matches = this.getMatchesForPkm(e, gen7);\n\t\t\treturn (filterUser ? matches.filter(e => e.user === filterUser) : matches).length;\n\t\t});\n\t}\n\n\thandleTextChanged = (e) => {\n\t\tthis.updatePkm(e.target.value);\n\t}\n\n\thandleShowChange = (e) => {\n\t\tthis.setState({ showWoMatch: e.target.checked })\n\t}\n\n\thandleGen6Change = (e) => {\n\t\tthis.setState({ gen7: false });\n\t\tthis.setState({ filteredPkm: this.calculateFilteredPkm(this.state.pkm, false, this.state.filterUser) })\n\t}\n\n\thandleGen7Change = (e) => {\n\t\tthis.setState({ gen7: true });\n\t\tthis.setState({ filteredPkm: this.calculateFilteredPkm(this.state.pkm, true, this.state.filterUser) })\n\t}\n\n\thandleUsernameChange = (e) => {\n\t\tconst name = e.target.value.match(/^(?:\\/?u\\/)?(.*)$/)[1];\n\t\tif (name === '' && e.target.value.match(/^\\/?u\\/$/)) {\n\t\t\tthis.setState({\n\t\t\t\tfilteredUser: '',\n\t\t\t\tfilteredPkm: []\n\t\t\t});\n\t\t} else {\n\t\t\tthis.setState({ \n\t\t\t\tfilterUser: name,\n\t\t\t\tfilteredPkm: this.calculateFilteredPkm(this.state.pkm, this.state.gen7, name)\n\t\t\t});\n\t\t}\n\t}\n\n\thandleDrop = (e) => {\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\t\tconsole.log(e);\n\t\tif (e.dataTransfer.files[0]) {\n\t\t\tconst file = e.dataTransfer.files[0];\n\t\t\tconst fileReader = new FileReader();\n\t\t\tfileReader.onload = (ev) => { \n\t\t\t\tconst text = ev.target.result;\n\t\t\t\te.target.value = text;\n\t\t\t\tthis.updatePkm(text);\n\t\t\t};\n\t\t\tfileReader.readAsText(file);\n\t\t}\n\t\tconsole.log(e);\n\t}\n\n\tgetMatchesForPkm(pkm, gen7) {\n\t\tif (!this.state.tsvs) return [];\n\t\treturn (gen7 ? this.state.tsvs.tsvs7 : this.state.tsvs.tsvs6)[+pkm[1]];\n\t}\n\n\tgetPkm() {\n\t\treturn this.state.showWoMatch ? this.state.pkm : this.state.filteredPkm;\n\t}\n\n\trender() {\n\t\tconst tsv6Count = this.state.tsvs ? this.state.tsvs.tsvs6.filter(e => e.length && e.some(f => !f.archived)).length : 0;\n\t\tconst tsv7Count = this.state.tsvs ? this.state.tsvs.tsvs7.filter(e => e.length && e.some(f => !f.archived)).length : 0;\n\t\treturn (\n\t\t\t<div class={style.home}>\n\t\t\t\t<div class={style.topWrapper}>\n\t\t\t\t\t<div class={style.settings}>\n\t\t\t\t\t\t<h3>Settings</h3>\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t<input type=\"checkbox\" onChange={this.handleShowChange} />\n\t\t\t\t\t\t\tShow Pokémon without matches\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t<input type=\"radio\" name=\"gen\" onChange={this.handleGen6Change} />\n\t\t\t\t\t\t\tGeneration 6\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t<input type=\"radio\" name=\"gen\" defaultChecked onChange={this.handleGen7Change} />\n\t\t\t\t\t\t\tGeneration 7\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<input type=\"text\" name=\"username\" placeholder=\"Limit results to this username\" onInput={this.handleUsernameChange} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class={style.statistics}>\n\t\t\t\t\t\t<h3>Statistics</h3>\n\t\t\t\t\t\tTSV6: <span class={style.invisible}>{'0000'.slice((\"\"+tsv6Count).length)}</span>{tsv6Count} / 4096\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\tTSV7: <span class={style.invisible}>{'0000'.slice((\"\"+tsv7Count).length)}</span>{tsv7Count} / 4096\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class={style.inputContainer}>\n\t\t\t\t\t<textarea wrap=\"soft\" placeholder=\"Paste some Pokémon data here or drag & drop a dump...\" onInput={this.handleTextChanged} onDrop={this.handleDrop} />\n\t\t\t\t</div>\n\t\t\t\t<table class={`${style.results} ${this.state.pkm.length ? '' : style.hidden }`}>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>Pokémon</th>\n\t\t\t\t\t\t<th>Matches</th>\n\t\t\t\t\t</tr>\n\t\t\t\t\t{this.getPkm().map(pkm => \n\t\t\t\t\t\t<tr class>\n\t\t\t\t\t\t\t<td>{pkm[0]}<span class={style.tsv}>{pkm[1]}</span>{pkm[2]}</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t{this.getMatchesForPkm(pkm, this.state.gen7).map(e =>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<a href={`https://www.reddit.com/r/SVExchange/comments/${e.link}/${pkm[1]}/`} target=\"_blank\">/u/{e.user}</a>\n\t\t\t\t\t\t\t\t\t\t{e.archived ? ' (recently archived)' : null}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t)}\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./routes/home/index.js","// removed by extract-text-webpack-plugin\nmodule.exports = {\"inputContainer\":\"inputContainer__26ab2\",\"results\":\"results__1fpcf\",\"hidden\":\"hidden__1IFvQ\",\"tsv\":\"tsv__3FGFu\",\"topWrapper\":\"topWrapper__3C23j\",\"settings\":\"settings__2-d0H\",\"statistics\":\"statistics__3IleG\",\"invisible\":\"invisible__2NF4r\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./routes/home/style.scss\n// module id = Lglr\n// module chunks = 0"],"sourceRoot":""}