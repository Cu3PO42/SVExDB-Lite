webpackJsonp([0],{FvLE:function(t,e,n){"use strict";function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"default",function(){return g});var r=n("KM04"),i=(n.n(r),n("Lglr")),l=n.n(i),o="https://raw.githubusercontent.com/Cu3PO42/SVEx-Crawler/gh-pages/tsvs.json",c=Object(r.h)("h3",null,"Settings"),h=Object(r.h)("br",null),u=Object(r.h)("br",null),p=Object(r.h)("h3",null,"Statistics"),d=Object(r.h)("br",null),f=Object(r.h)("tr",null,Object(r.h)("th",null,"Pokémon"),Object(r.h)("th",null,"Matches")),g=function(t){function e(){for(var e,n,s,r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];return e=n=a(this,t.call.apply(t,[this].concat(i))),n.state={tsvs:void 0,pkm:[],filteredPkm:[],showWoMatch:!1,gen7:!0,filterUser:""},n.handleTextChanged=function(t){n.updatePkm(t.target.value)},n.handleShowChange=function(t){n.setState({showWoMatch:t.target.checked})},n.handleGen6Change=function(){n.setState({gen7:!1}),n.setState({filteredPkm:n.calculateFilteredPkm(n.state.pkm,!1,n.state.filterUser)})},n.handleGen7Change=function(){n.setState({gen7:!0}),n.setState({filteredPkm:n.calculateFilteredPkm(n.state.pkm,!0,n.state.filterUser)})},n.handleUsernameChange=function(t){var e=t.target.value.match(/^(?:\/?u\/)?(.*)$/)[1];n.setState(""===e&&t.target.value.match(/^\/?u\/$/)?{filteredUser:"",filteredPkm:[]}:{filterUser:e,filteredPkm:n.calculateFilteredPkm(n.state.pkm,n.state.gen7,e)})},n.handleDrop=function(t){if(t.stopPropagation(),t.preventDefault(),console.log(t),t.dataTransfer.files[0]){var e=t.dataTransfer.files[0],a=new FileReader;a.onload=function(e){var a=e.target.result;t.target.value=a,n.updatePkm(a)},a.readAsText(e)}console.log(t)},s=e,a(n,s)}return s(e,t),e.prototype.componentDidMount=function(){var t=this;if("undefined"!=typeof window&&window.localStorage){var e=localStorage.getItem("tsvdata");if(e){var n=JSON.parse(e);if(this.setState({tsvs:n}),n&&n.last_updated_at&&(new Date).getTime()/1e3-n.last_updated_at<10800)return}fetch(o).then(function(t){return t.json()}).then(function(e){t.setState({tsvs:e}),localStorage.setItem("tsvdata",JSON.stringify(e))}).catch(function(){return null})}else fetch(o).then(function(t){return t.json()}).then(function(e){t.setState({tsvs:e})})},e.prototype.updatePkm=function(t){var e=t.split(/\r?\n/).filter(function(t){return/\b\d{4}\b/.test(t)}).map(function(t){return t.split(/(\b\d{4}\b)/)});this.setState({pkm:e,filteredPkm:this.calculateFilteredPkm(e,this.state.gen7,this.state.filterUser)})},e.prototype.calculateFilteredPkm=function(t,e,n){var a=this;return t.filter(function(t){var s=a.getMatchesForPkm(t,e);return(n?s.filter(function(t){return t.user===n}):s).length})},e.prototype.getMatchesForPkm=function(t,e){return this.state.tsvs?(e?this.state.tsvs.tsvs7:this.state.tsvs.tsvs6)[+t[1]]:[]},e.prototype.getPkm=function(){return this.state.showWoMatch?this.state.pkm:this.state.filteredPkm},e.prototype.render=function(){var t=this,e=this.state.tsvs?this.state.tsvs.tsvs6.filter(function(t){return t.length&&t.some(function(t){return!t.archived})}).length:0,n=this.state.tsvs?this.state.tsvs.tsvs7.filter(function(t){return t.length&&t.some(function(t){return!t.archived})}).length:0;return Object(r.h)("div",{class:l.a.home},Object(r.h)("div",{class:l.a.topWrapper},Object(r.h)("div",{class:l.a.settings},c,Object(r.h)("label",null,Object(r.h)("input",{type:"checkbox",onChange:this.handleShowChange}),"Show Pokémon without matches"),h,Object(r.h)("label",null,Object(r.h)("input",{type:"radio",name:"gen",onChange:this.handleGen6Change}),"Generation 6"),Object(r.h)("label",null,Object(r.h)("input",{type:"radio",name:"gen",defaultChecked:!0,onChange:this.handleGen7Change}),"Generation 7"),u,Object(r.h)("input",{type:"text",name:"username",placeholder:"Limit results to this username",onInput:this.handleUsernameChange})),Object(r.h)("div",{class:l.a.statistics},p,"TSV6: ",Object(r.h)("span",{class:l.a.invisible},"0000".slice((""+e).length)),e," / 4096",d,"TSV7: ",Object(r.h)("span",{class:l.a.invisible},"0000".slice((""+n).length)),n," / 4096")),Object(r.h)("div",{class:l.a.inputContainer},Object(r.h)("textarea",{wrap:"soft",placeholder:"Paste some Pokémon data here or drag & drop a dump...",onInput:this.handleTextChanged,onDrop:this.handleDrop})),Object(r.h)("table",{class:l.a.results+" "+(this.state.pkm.length?"":l.a.hidden)},f,this.getPkm().map(function(e){return Object(r.h)("tr",{class:!0},Object(r.h)("td",null,e[0],Object(r.h)("span",{class:l.a.tsv},e[1]),e[2]),Object(r.h)("td",null,t.getMatchesForPkm(e,t.state.gen7).map(function(t){return Object(r.h)("div",null,Object(r.h)("a",{href:"https://www.reddit.com/r/SVExchange/comments/"+t.link+"/"+e[1]+"/",target:"_blank"},"/u/",t.user),t.archived?" (recently archived)":null)})))})))},e}(r.Component)},Lglr:function(t){t.exports={inputContainer:"inputContainer__26ab2",results:"results__1fpcf",hidden:"hidden__1IFvQ",tsv:"tsv__3FGFu",topWrapper:"topWrapper__3C23j",settings:"settings__2-d0H",statistics:"statistics__3IleG",invisible:"invisible__2NF4r"}}});
//# sourceMappingURL=route-home.chunk.d5a05.js.map